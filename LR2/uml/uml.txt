@startuml
skinparam classAttributeIconSize 0
skinparam dpi 150

abstract class BasicStudent {
	-- Поля --
	{field} # id
	{field} # git
	
	-- Публичные методы класса --
	{static} + read_from_txt(file_path)
	{static} + write_to_txt(file_path, stud_list)
	
	-- Защищённые методы класса --
	
	{static} # string_ctor(str)
	{static} # hash_from_fields(fields)
	{static} # contact_type(contact)
	{static} # join_with_comma(str_arr)
	{static} # pretty_represent(field_prompt, value)

	{static} # name_correct?(name)
	{static} # phone_correct?(phone)
	{static} # telegram_correct?(tg)
	{static} # email_correct?(email)
	{static} # git_correct?(git)
	{static} # surname_in_correct?(surname_initials)
	{static} # contact_correct?(contact)
	
	-- Публичные методы объекта --
	
	{method} + git_exists?()
	{method} + contact_exists?()
	{method} + validate()
	{method} + inspect()
	
	-- Защищённые методы объекта --
	
	{method} # inspect_impl(fields)
	
	-- Итератор --
	{method} + each{|field, value|}
}

class Student {
	-- Поля --
	{field} + id
	{field} + surname
	{field} + first_name
	{field} + mid_name
	{field} + phone
	{field} + telegram
	{field} + email
	{field} + git
	
	-- Конструкторы --
	
	{static} + initialize(surname:, first_name:, mid_name:, id:nil, phone:nil, telegram:nil, email:nil, git:nil)
	
	-- Публичные методы класса --

	{static} + all_fields()
	
	-- Приватные методы класса --
	{static} - preprocess_phone(value)
	
	-- Методы объекта --
	
	{method} + surname_initials()
	{method} + contact()
	{method} + get_info()
	{method} + set_contacts(phone: nil, telegram: nil, email: nil)
	{method} + to_s()
	
}

class StudentShort {
	-- Геттеры --
	{field} + id
	{field} + surname_initials
	{field} + git
	{field} + contact
	
	-- Сеттеры --
	
	{method} - id=
	{method} - surname_initials=
	{method} - git=
	{method} - contact=

	-- Конструкторы --
	
	{static} - initialize(id:, surname_initials:, git:, contact:)
	
	{static} + id_string_ctor(id, str)
	{static} + student_ctor(student)
	
	-- Статические методы --
	
	{static} + all_fields()
	
	-- Методы объекта --
	
	{method} + to_s()
}

class DataTable {
	{field} - array
	
	-- Конструктор --
	{static} + initialize(array)
	
	-- Публичные методы --
	{method} + get(x, y)
	{method} + cols()
	{method} + rows()
	
	-- Приватные методы класса --
	{static} - check_array(arr)
	{static} - check_subarrays_size_equality(arr)
}

abstract class DataList { 
	{field} # array
	
	-- Конструктор --
	{static} # initialize(arr)
	
	-- Публичные методы --
	{method} + select(num)
	{method} + unselect()
	{method} + get_selected()
	
	-- Шаблонные методы --
	{method} + get_data()
	{static} + get_names()
	
	-- МЕТОДЫ КОТОРЫЕ ОЧЕНЬ НАДО РЕАЛИЗОВАТЬ В ПОТОМКАХ --
	{method} - get_data_impl()
	{static} - get_names_impl()
	
	-- Приватные методы класса --
	{static} - elements_equal_to?(array, el)
	
	-- Приватные методы объекта --
	{method} - check_array(arr)
}

class DataListStudentShort {
	{method} - get_data_impl()
	{static} - get_names_impl()
}


abstract StudentsList {
	-- Конструктор --
	{static} + initialize()
	
	-- Методы --
	{method} + read_all_objects(reader, file)
	{method} + write_all_objects(writer, file)
	{method} + add_obj(obj)
	{method} + upd_obj(id, obj)
	{method} + del_obj(id)
	{method} + get_k_n_student_short_list(k, n)
	{method} + sort_si()
	{method} + get_students_count()
	
	-- Приватные методы --
	{method} - get_index(id)
}

abstract BasicReaderWriter {
	{method} + read_objects(file)
	{method} + write_objects(array, file)
	
	-- Абстрактные методы --
	{method} - parse(str)
	{method} - esrap(data_array)
}

class TXTReaderWriter {
	-- Переопределённые методы --
	{static} - parse(str)
	{static} - esrap(data_array)
}

class JSONReaderWriter {
	-- Переопределённые методы --
	{static} - parse(str)
	{static} - esrap(data_array)
}

class YAMLReaderWriter {
	-- Переопределённые методы --
	{static} - parse(str)
	{static} - esrap(data_array)
}

interface Enumerable {}

interface CheckCorrectnessWriter {
	{method} + checked_writer(field, correct, nil_expected: true, preprocess: lambda {|x| x})
}

interface Parser {
	{static} + parse(str)
	{static} + unparse(data_hash)
}

BasicStudent ..|> CheckCorrectnessWriter
DataTable ..|> CheckCorrectnessWriter
DataList ..|> CheckCorrectnessWriter

BasicStudent ..|> Enumerable
BasicStudent ..|> Parser

Student --|> BasicStudent
StudentShort --|> BasicStudent
StudentShort ..> Student 

DataListStudentShort --|> DataList
DataList ..> DataTable

StudentsList ..> Student
StudentsList ..> DataList
StudentsList ..> BasicReaderWriter

TXTReaderWriter --|> BasicReaderWriter
TXTReaderWriter ..|> Parser

JSONReaderWriter --|> BasicReaderWriter

YAMLReaderWriter --|> BasicReaderWriter

@enduml